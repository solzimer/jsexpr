/*! jsexpr 2018-06-11 */

"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r};!function u(i,c,f){function a(t,r){if(!c[t]){if(!i[t]){var n="function"==typeof require&&require;if(!r&&n)return n(t,!0);if(p)return p(t,!0);var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}var o=c[t]={exports:{}};i[t][0].call(o.exports,function(r){return a(i[t][1][r]||r)},o,o.exports,u,i,c,f)}return c[t].exports}for(var p="function"==typeof require&&require,r=0;r<f.length;r++)a(f[r]);return a}({1:[function(t,n,e){(function(){this.jsexpr;var r=t("./index.js");void 0!==e&&(void 0!==n&&n.exports&&(e=n.exports=r),e.jsexpr=r),"undefined"!=typeof window&&(window.jsexpr=r)}).call(this)},{"./index.js":2}],2:[function(r,t,n){var e=r("./lib/expression");t.exports=e},{"./lib/expression":3}],3:[function(require,module,exports){var extend=require("extend"),RX=/\$\{[^\}]+\}/g;function _val(obj,key){try{return eval("this."+key)}catch(r){return}}function val(r,t){var n=_val.call(r,r,t);return void 0===n?"":n}function valwalk(n,e,o){return n&&Object.keys(n).forEach(function(r){var t=o+(o?".":"")+r;e[t]&&(n[r]=e[t]),"object"==_typeof(n[r])&&valwalk(n[r],e,t)}),n}function parse(n){var r=n.match(RX);r&&r.forEach(function(r){var t=r.replace(/[\$\{\}]/g,"").trim();n=n.replace(r,"__val(entry,'"+t+"')")});var t=new Function("entry","__val","return ("+n+")");return function(r){return t(r,val)}}function tokens(e){if("${JSON}"==e)return function(r){return JSON.stringify(r,null,2)};var o=[];return(e.match(RX)||[]).forEach(function(t){var r=e.indexOf(t),n=e.substring(0,r);e=e.substring(r+t.length),o.push(n),o.push(function(r){return val(r,t.replace(/\$|\{|\}/g,""))})}),o.push(e),function(t){return o.map(function(r){return"string"==typeof r?r:r(t)}).join("")}}function jsontokens(n){var i=[];return function e(o,u){o&&Object.keys(o).forEach(function(r){var t=u+(u?".":"")+r,n=o[r];"string"==typeof n?i.push({path:t,fn:tokens(n)}):e(n,t)})}(n,""),function(t){var r=i.map(function(r){return{path:r.path,value:r.fn(t)}}).reduce(function(r,t){return r[t.path]=t.value,r},{});return valwalk(extend(!0,{},n),r,"")}}module.exports={fn:parse,eval:parse,expr:function(r){return"object"==(void 0===r?"undefined":_typeof(r))?jsontokens(r):tokens(r)}}},{extend:4}],4:[function(r,t,n){var o=Object.prototype.hasOwnProperty,u=Object.prototype.toString,s=function(r){return"function"==typeof Array.isArray?Array.isArray(r):"[object Array]"===u.call(r)},l=function(r){if(!r||"[object Object]"!==u.call(r))return!1;var t,n=o.call(r,"constructor"),e=r.constructor&&r.constructor.prototype&&o.call(r.constructor.prototype,"isPrototypeOf");if(r.constructor&&!n&&!e)return!1;for(t in r);return void 0===t||o.call(r,t)};t.exports=function r(){var t,n,e,o,u,i,c=arguments[0],f=1,a=arguments.length,p=!1;for("boolean"==typeof c&&(p=c,c=arguments[1]||{},f=2),(null==c||"object"!==(void 0===c?"undefined":_typeof(c))&&"function"!=typeof c)&&(c={});f<a;++f)if(null!=(t=arguments[f]))for(n in t)e=c[n],c!==(o=t[n])&&(p&&o&&(l(o)||(u=s(o)))?(u?(u=!1,i=e&&s(e)?e:[]):i=e&&l(e)?e:{},c[n]=r(p,i,o)):void 0!==o&&(c[n]=o));return c}},{}]},{},[1]);