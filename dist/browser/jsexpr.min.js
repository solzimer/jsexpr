/*! jsexpr 2018-06-12 */

"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};!function u(i,c,f){function a(r,n){if(!c[r]){if(!i[r]){var t="function"==typeof require&&require;if(!n&&t)return t(r,!0);if(l)return l(r,!0);var e=new Error("Cannot find module '"+r+"'");throw e.code="MODULE_NOT_FOUND",e}var o=c[r]={exports:{}};i[r][0].call(o.exports,function(n){return a(i[r][1][n]||n)},o,o.exports,u,i,c,f)}return c[r].exports}for(var l="function"==typeof require&&require,n=0;n<f.length;n++)a(f[n]);return a}({1:[function(r,t,e){(function(){this.jsexpr;var n=r("./index.js");void 0!==e&&(void 0!==t&&t.exports&&(e=t.exports=n),e.jsexpr=n),"undefined"!=typeof window&&(window.jsexpr=n)}).call(this)},{"./index.js":2}],2:[function(n,r,t){var e=n("./lib/expression");r.exports=e},{"./lib/expression":3}],3:[function(require,module,exports){var extend=require("extend"),RX=/\$\{[^\}]+\}/g;function fneval(obj,key){try{return eval("this."+key)}catch(n){return}}var EVALS={itval:function(r,n){n.split(".").forEach(function(n){null!=r&&null!=r&&(r=r[n])});var t=r||void 0;return void 0===t?"":t},eval:function(n,r){var t=fneval.call(n,n,r);return void 0===t?"":t},valwalk:function(t,e,o){return t&&Object.keys(t).forEach(function(n){var r=o+(o?".":"")+n;e[r]&&(t[n]=e[r]),"object"==_typeof(t[n])&&EVALS.valwalk(t[n],e,r)}),t}};function parse(t,r){r=r||"eval";var n=t.match(RX);n&&n.forEach(function(n){var r=n.replace(/[\$\{\}]/g,"").trim();t=t.replace(n,"__val(entry,'"+r+"')")});var e=new Function("entry","__val","return ("+t+")");return function(n){return e(n,EVALS[r])}}function tokens(e,o){if(o=o||"eval","${JSON}"==e)return function(n){return JSON.stringify(n,null,2)};var u=[];return(e.match(RX)||[]).forEach(function(r){var n=e.indexOf(r),t=e.substring(0,n);e=e.substring(n+r.length),u.push(t),u.push(function(n){return EVALS[o](n,r.replace(/\$|\{|\}/g,""))})}),u.push(e),function(r){return u.map(function(n){return"string"==typeof n?n:n(r)}).join("")}}function jsontokens(t){var i=[];return function e(o,u){o&&Object.keys(o).forEach(function(n){var r=u+(u?".":"")+n,t=o[n];"string"==typeof t?i.push({path:r,fn:tokens(t)}):e(t,r)})}(t,""),function(r){var n=i.map(function(n){return{path:n.path,value:n.fn(r)}}).reduce(function(n,r){return n[r.path]=r.value,n},{});return EVALS.valwalk(extend(!0,{},t),n,"")}}module.exports={fn:parse,eval:parse,expr:function(n){return"object"==(void 0===n?"undefined":_typeof(n))?jsontokens(n):tokens(n)}}},{extend:4}],4:[function(n,r,t){var o=Object.prototype.hasOwnProperty,u=Object.prototype.toString,p=function(n){return"function"==typeof Array.isArray?Array.isArray(n):"[object Array]"===u.call(n)},s=function(n){if(!n||"[object Object]"!==u.call(n))return!1;var r,t=o.call(n,"constructor"),e=n.constructor&&n.constructor.prototype&&o.call(n.constructor.prototype,"isPrototypeOf");if(n.constructor&&!t&&!e)return!1;for(r in n);return void 0===r||o.call(n,r)};r.exports=function n(){var r,t,e,o,u,i,c=arguments[0],f=1,a=arguments.length,l=!1;for("boolean"==typeof c&&(l=c,c=arguments[1]||{},f=2),(null==c||"object"!==(void 0===c?"undefined":_typeof(c))&&"function"!=typeof c)&&(c={});f<a;++f)if(null!=(r=arguments[f]))for(t in r)e=c[t],c!==(o=r[t])&&(l&&o&&(s(o)||(u=p(o)))?(u?(u=!1,i=e&&p(e)?e:[]):i=e&&s(e)?e:{},c[t]=n(l,i,o)):void 0!==o&&(c[t]=o));return c}},{}]},{},[1]);